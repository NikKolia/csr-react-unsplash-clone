(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){"use strict";var a,r=n(3);!function(e){e.SEARCH_SUCCEED="@images/search_succeed",e.LOADING="@images/loading",e.SEARCH_ERROR="@images/search_error",e.FETCH_PHOTOS="@images/fetch_photos"}(a||(a={}));var c={items:[],totalPages:0,total:0,isLoading:!1,currentPage:1},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOADING:case a.SEARCH_SUCCEED:return Object(r.a)({},e,t.payload);default:return e}},i=function(e){return e.images.items},o=function(e){return e.images.isLoading},s=function(e){return e.images.total},l=function(e){return e.images.totalPages},p=function(e){return e.images.currentPage},f=n(2),m=n.n(f),h=n(14),d=n(19),b=n.n(d),v=n(4),g=b.a.create({baseURL:v.a.baseUrl,headers:{Authorization:"Client-ID ".concat(v.a.clientId)}}),O=function(){var e=Object(h.a)(m.a.mark(function e(t){var n,a,r,c,u,i;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={params:{query:t.value,page:t.page}},"/search/photos",e.next=4,g.get("/search/photos",n);case 4:return a=e.sent,r=a.data,c=r.total_pages,u=r.total,i=r.results,e.abrupt("return",{totalPages:c,total:u,items:i});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(h.a)(m.a.mark(function e(){var t,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={params:{page:1}},"/photos",e.next=4,g.get("/photos",t);case 4:return n=e.sent,n.data.results,e.abrupt("return",{totalPages:0,total:0,items:n.data});case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(h.a)(m.a.mark(function e(t){var n,a,r,c,u,i,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.page+1,a={params:{query:t.value,page:n}},"/search/photos",e.next=5,g.get("/search/photos",a);case 5:return r=e.sent,c=r.data,u=c.total_pages,i=c.total,o=c.results,e.abrupt("return",{totalPages:u,total:i,items:o});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),y=function(){return{type:a.LOADING,payload:{isLoading:!0}}},_=function(e){return{type:a.SEARCH_SUCCEED,payload:e}},N=function(){return{type:a.SEARCH_ERROR}},S=function(e){return function(){var t=Object(h.a)(m.a.mark(function t(n){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(y()),t.next=3,O(e);case 3:a=t.sent,n(a?_(Object(r.a)({},a,{isLoading:!1})):N());case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},k=function(){return function(){var e=Object(h.a)(m.a.mark(function e(t){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(y()),e.next=3,E();case 3:n=e.sent,t(n?_(Object(r.a)({},n,{isLoading:!1})):N());case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(h.a)(m.a.mark(function t(n){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(y()),t.next=3,j(e);case 3:a=t.sent,n(a?_(Object(r.a)({},a,{isLoading:!1})):N());case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()};n.d(t,"a",function(){return u}),n.d(t,"e",function(){return S}),n.d(t,"f",function(){return k}),n.d(t,"i",function(){return w}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"g",function(){return s}),n.d(t,"h",function(){return l}),n.d(t,"b",function(){return p})},20:function(e,t,n){"use strict";var a,r=n(3);!function(e){e.SET_TOKEN="@auth/set_token"}(a||(a={}));var c={isAuthenticated:!1,token:""},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.SET_TOKEN:var n=t.payload.access_token;return Object(r.a)({},e,{isAuthenticated:!0,token:n});default:return e}},i=function(e){return e.auth.isAuthenticated},o=n(2),s=n.n(o),l=n(14),p=n(19),f=n.n(p),m=n(4),h=function(){var e=Object(l.a)(s.a.mark(function e(t){var n,a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={params:{client_id:m.a.clientId,client_secret:m.a.clientSecret,redirect_uri:m.a.appDomain+m.a.redirectUri,code:t,grant_type:"authorization_code"}},a=f.a.create(n),e.next=4,a.post("https://unsplash.com/oauth/token");case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),d=function(e){return function(){var t=Object(l.a)(s.a.mark(function t(n){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(e);case 2:r=t.sent,n((c=r,{type:a.SET_TOKEN,payload:c}));case 4:case"end":return t.stop()}var c},t)}));return function(e){return t.apply(this,arguments)}}()};n.d(t,"a",function(){return u}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return d})},39:function(e,t){},4:function(e,t,n){"use strict";var a=n(3),r={baseUrl:"https://api.unsplash.com",clientId:"9a6b0e49e1eff14b3a5477975544ed60f3197105c6d6e2c50cb9a300fa712a1d",clientSecret:"5a1243845b45bb9357ae8020206d489169fd55f3be660cbde8655df87a7db651",response_type:"code",scope:"public+read_user",redirectUri:"/auth"},c=(Object(a.a)({},r,{appDomain:"http://localhost:3000"}),Object(a.a)({},r,{appDomain:"https://csr-react-unsplash-clone.herokuapp.com"}));t.a=c},44:function(e,t,n){"use strict";var a=n(17),r=n(10),c=n(20),u=(n(39),Object(a.c)({images:r.a,auth:c.a}));t.default=u},50:function(e,t,n){e.exports=n(97)},79:function(e,t,n){},80:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),u=n(41),i=n.n(u),o=n(15),s=n(17),l=n(43),p=n(44),f=n(5),m=n(6),h=n(8),d=n(7),b=n(9),v=n(10),g=n(3),O=n(18),E=n.n(O),j=(n(79),function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(n=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={spans:0},n.imageRef=c.a.createRef(),n.setSpans=function(){var e=n.imageRef.current.clientHeight,t=Math.ceil(e/10);n.setState(function(e){return Object(g.a)({},e,{spans:t})})},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.imageRef.current.addEventListener("load",this.setSpans)}},{key:"componentWillUnmount",value:function(){this.imageRef.current.removeEventListener("load",this.setSpans)}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.className,a=this.state.spans;return c.a.createElement("div",{className:E()("grid-item",n),style:{gridRowEnd:"span ".concat(a)}},c.a.createElement("img",{src:t,alt:"",ref:this.imageRef}))}}]),t}(c.a.PureComponent)),y=(n(80),n(23)),_=n.n(y),N=n(25),S=(n(88),function(e){var t=e.children,n=e.className,a=Object(N.a)(e,["children","className"]);return c.a.createElement("button",Object.assign({className:E()("btn ",n)},a),t)}),k=function(e){function t(){return Object(f.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.getPhotos(),this.props.pagImages()}},{key:"render",value:function(){var e=this.props,t=e.images;return e.isLoading?c.a.createElement("h2",null,"loading..."):c.a.createElement(c.a.Fragment,null,c.a.createElement(_.a,null,c.a.createElement("title",null,this.props.title)),c.a.createElement("div",{className:"grid"},c.a.createElement("div",{className:"grid__content"},t.map(function(e){var t=e.description,n=e.urls,a=e.likes,r=e.id;return c.a.createElement(j,{className:"grid__item",id:r,description:t,url:n.small,likes:a})})),c.a.createElement("div",null,"Found items: ",this.props.total),c.a.createElement("div",null,"Total pages: ",this.props.totalPages),c.a.createElement("div",null,"Current page: ",this.props.currentPage),c.a.createElement(S,{className:"btn",onClick:this.props.pagImages},"Show next page")))}}]),t}(c.a.PureComponent),w=Object(o.b)(function(e){return{images:Object(v.c)(e),isLoading:Object(v.d)(e),total:Object(v.g)(e),totalPages:Object(v.h)(e),currentPage:Object(v.b)(e)}},function(e){return{getPhotos:function(){return e(Object(v.f)())},pagImages:function(t){return e(Object(v.i)({value:t,page:1}))}}})(k);n(89);!function(e){e.TEXT="text",e.NUMBER="number",e.PASSWORD="password",e.PHONE="phone"}(a||(a={}));var C=function(e){function t(){return Object(f.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=Object(N.a)(e,["type"]);return console.log(n),c.a.createElement("div",{className:"field"},c.a.createElement("input",Object.assign({type:t},n,{className:"field__native-input"})))}}]),t}(c.a.PureComponent),P=(n(90),function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={value:""},n.onSubmit=function(e){e.preventDefault(),n.props.onSubmit(n.state.value)},n.changeHandler=function(e){var t=e.currentTarget.value;n.setState(function(e){return Object(g.a)({},e,{value:t})})},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.value,t=E()("search-form",this.props.className);return c.a.createElement("form",{onSubmit:this.onSubmit,className:t},c.a.createElement(C,{type:a.TEXT,value:e,placeholder:"Search",onChange:this.changeHandler}))}}]),t}(c.a.Component)),x=(n(91),Object(o.b)(null,function(e){return{onSearch:function(t){return e(Object(v.e)({value:t,page:1}))}}})(function(e){var t=e.onSearch,n=e.children;return c.a.createElement("nav",{className:"page-nav"},c.a.createElement("div",{className:"page-nav__container"},c.a.createElement(P,{className:"page-nav__search-form",onSubmit:t}),c.a.createElement("ul",{className:"page-nav__menu"},n)))})),R=n(20),A=n(4),D=function(e){function t(){return Object(f.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.location.search;if(-1!==e.indexOf("code=")){var t=e.slice(e.indexOf("=")+1);this.props.setToken(t)}}},{key:"componentWillReceiveProps",value:function(e,t){e.isAuthenticated&&this.props.history.push("/")}},{key:"render",value:function(){return r.createElement(r.Fragment,null,r.createElement(_.a,null,r.createElement("title",null,this.props.title)),r.createElement("div",null,r.createElement("a",{href:"https://unsplash.com/oauth/authorize?client_id=".concat(A.a.clientId,"&redirect_uri=").concat(A.a.appDomain+A.a.redirectUri,"&response_type=").concat(A.a.response_type,"&scope=").concat(A.a.scope)},"authorize")))}}]),t}(r.PureComponent),L=Object(o.b)(function(e){return{isAuthenticated:Object(R.b)(e)}},function(e){return{setToken:function(t){return e(Object(R.c)(t))}}})(D),T=(n(92),n(102)),I=n(100),U=function(e){var t=e.path,n=e.title;return c.a.createElement("li",{className:"page-nav__item"},c.a.createElement(I.a,{to:t},c.a.createElement("span",null,n)))},H=n(26),M=function(e){function t(){return Object(f.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.createElement(H.a,null,r.createElement(H.b,{field:"email"}),r.createElement(H.b,{field:"password"}),r.createElement("button",{type:"submit"},"Submit"))}}]),t}(r.Component),z=Object(o.b)(null,function(e){return{onSubmit:function(t){return e(Object(v.e)({value:t,page:1}))}}})(function(){return r.createElement("div",{className:"sign-in"},r.createElement(M,{className:"sign-in__form"}))}),B=[{title:"Home",path:"/",exact:!0,props:{title:"Home page of our cool site"},Component:w},{title:"Auth",path:"/auth",props:{title:"Auth"},Component:function(e){return c.a.createElement(L,e)}},{title:"Product",path:"/products/:productId",exact:!0,props:{title:"Test"},Component:function(e){return console.log(e.match),c.a.createElement("div",null,"Product: ",e.match.params.productId)}},{title:"About",path:"/about",Component:function(){return c.a.createElement("h1",null,"Hello from about page")}},{title:"Sign In",path:"/sign-in",Component:function(){return c.a.createElement(z,null)}}],F=function(e){function t(){return Object(f.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"page-container"},c.a.createElement(x,null,B.map(function(e){var t=e.path,n=e.title;return c.a.createElement(U,{path:t,title:n})})),B.map(function(e){var t=e.path,n=e.exact,a=e.Component,r=e.props;return c.a.createElement(T.a,{path:t,exact:n,render:function(e){return console.log(e),c.a.createElement(a,Object.assign({},r,e))}})}))}}]),t}(c.a.Component),V=(n(96),n(101));console.log(Object({NODE_ENV:"production",PUBLIC_URL:""}),Object({NODE_ENV:"production",PUBLIC_URL:""}).ENV);var X=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,G=Object(s.e)(p.default,Object(s.d)(Object(s.a)(l.a),X()));i.a.render(c.a.createElement(o.a,{store:G},c.a.createElement(V.a,null,c.a.createElement(F,null))),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.b1fcc3d9.chunk.js.map